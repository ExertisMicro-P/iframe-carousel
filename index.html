<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>Iframe carousel</title>
<link rel="stylesheet" type="text/css" href="css/axcss.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
<script src="js/jquery-2.1.3.min.js"></script>
<script src="js/moment.min.js"></script>
<link href="css/carousel.css" rel="stylesheet">

<style>
    kbd {
        padding:10px 25px 10px 20px;
        -webkit-box-shadow: 7px 7px 15px 0px rgba(50, 50, 50, 0.75);
        -moz-box-shadow:    7px 7px 15px 0px rgba(50, 50, 50, 0.75);
        box-shadow:         7px 7px 15px 0px rgba(50, 50, 50, 0.75);
    }
    
    .topdownalittle {
        margin-top: 20px;
    }
    
</style>

<script> 
    // note: you won't find https://store.exertis.co.uk on here because it breaks out of iframes!    
    var sites = [
        //'localpages/twitter-f1.html',
        'http://www.exertis.com',
        //'http://www.exertis.co.uk',
        'https://www.xboxliveredemption.eu/nowtv',
        'https://www.xboxliveredemption.eu/wuaki',
        'https://www.xboxliveredemption.eu/wuaki',
        'http://www.brighthousegaming.co.uk',
        'http://shop.brighthousegaming.co.uk',
        'http://redeem.fiercepc.co.uk',
      //  'https://store.exertisgem.co.uk/exertisdigital/', 
        'https://eb.exertis.co.uk/?e=695cc4a2a81f8d463f5257c7b91b3732', // Exertis
        'http://www.exertiscareers.co.uk/',        
        'http://backend.exertiscareers.co.uk/',
        'http://cockpit.exertiscareers.co.uk/',
        'https://staff.digitalinc.org/?portal=65092C7E0E04627B010905',
        'http://intranet2/mdfs',
        'http://linxtablets.com/',
        'https://epg.exertis.co.uk',
        'http://epgcustomerview.exertis.co.uk',
        'http://stockroom.exertis.co.uk',
        'http://edsr.exertis.co.uk',
        'https://www.mediastreamingmarket.com',
        'https://redeng.exertis.co.uk',
        'http://guest:guest@ma-mqd-02:55672/mgmt/#/queues',
        'http://debitnotes.websys.co.uk',
        'https://mma.exertis.co.uk',       
        'http://mb002684.micro-p.com/data-app-api/dashboard/brighthouse_claimed',
        'http://mb002684.micro-p.com/data-app-api/dashboard/nowtv_claimed',
        'http://webapp.websys.co.uk/',
        'http://iconnect.exertis.co.uk',        
        'http://www.exertisztorm.com',
        'http://www.exertis.fr/',
        'http://www.exertis.se/',
        'http://www.exertisgoconnect.nl/',
        'http://3pl.exertis.co.uk/hive/',
        'http://svitla.com/uploads/post/main_photo/16/Agile1.png'
        
    ];
    
    var repeatingsites = [
        {'repeatevery': 5, 'site': 'https://uptimerobot.com/dashboard.php#tvMode'},
        {'repeatevery': 5, 'site': 'http://edistats.exertis.co.uk/index.php'} ,
        {'repeatevery': 5, 'site': 'https://app.teamweek.com/#p/zehn_1mth-wqdwjfbjh4'}, 
        {'repeatevery': 5, 'site': 'https://www.meteoblue.com/en/weather/forecast/week/basingstoke_united-kingdom_2656192'} ,
        {'repeatevery': 5, 'site': 'http://www.timeanddate.com/worldclock/fullscreen.html?n=1324'} 
        
        
    ];
    
    // set to true to hide url in top nav bar
    var hidenavbarurl = false;
    
    // set to true to not show captions
    var hidecaptions = false;
    
    
    
    // runs when page loads
    $(document).ready(function() {
        
        // show time in top nav-bar and kicks off repeating 1s timer
        //showtime();
        
        count = 0;
        newsites = [];

        // Some site we want to see more often.
        // inject repeating sites in first
        $.each(sites, function(i,v) {
            newsites.push(v);
            count++;
            $.each(repeatingsites, function(ii,vv) {
                if (count % vv.repeatevery == 0) {
                   newsites.push(vv.site); 
                }
            });
            
        });
        
        // Now create iframes for all the sites including the repeating sites
        $.each(newsites, function(i,v) {
           control = $("<li data-target='#myCarousel' data-slide-to='"+i+"'></li>");
           var elestr = 
           "<div class='item'>"+
                    "<iframe width='100%' height='100%' frameborder='0' src='"+v+"' allowfullscreen webkitallowfullscreen mozallowfullscreen oallowfullscreen msallowfullscreen allowtransparency='true' style='background: #FFFFFF;'></iframe>";
            if (!hidecaptions) {
                elestr += "<div class='carousel-caption'>"+
                            "<h1><kbd>"+v+" ("+(i+1)+"/"+newsites.length+")<kbd></h1>" +    
                          "</div>";
            }

          elestr += "</div>";

          $('.carousel-indicators').append(control);
          $('.carousel-inner').append($(elestr));
        });
        
        $("div.item:first").addClass('active');
        $('.carousel-indicators li:first').addClass('active');
        
        
        caption = $('.carousel-inner .item:first').find('.carousel-caption');
        $(caption).fadeOut(10000);
            
            
        // display url at top of screen
        if (!hidenavbarurl) {
            $('#nav-bar-url').html(newsites[0]);
        }
        
        
        // this runs on a slide transition
        // refreshes the iframe contents so we get the latest content
        // fades the caption out
        // copies the iframe url into the top nav bar
        $('#myCarousel').on('slid.bs.carousel', function (e) {
            iframe = $(e.relatedTarget).find('iframe');
            iframe[0].src = iframe[0].src; // triggers iframe refresh
            //alert(relatedTarget.id);
            caption = $(e.relatedTarget).find('.carousel-caption');
            $(caption).fadeOut(10000);
            
            // display url at top of screen
            if (!hidenavbarurl) {
                $('#nav-bar-url').html(iframe[0].src);
            }
        });
    })
</script>


<SCRIPT LANGUAGE="JavaScript">
<!--  Clock --
var timerID = null
var timerRunning = false
var pauseBetweenSlides = 1000; // ms

/*
function stopclock(){
    if(timerRunning)
        clearTimeout(timerID)
    timerRunning = false
}
*/

/*
function startclock(){
    stopclock()
    showtime()
}
*/

function showtime(){
    $('#clock').text(moment().format('MMMM Do YYYY, h:mm:ss a'));
    timerID = setTimeout("showtime()",pauseBetweenSlides)
    timerRunning = true
}
//-->
</SCRIPT>

</head>

<body>
<header class="header">
<nav class="navbar navbar-default">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <a class="navbar-brand" href="#"><img src="http://res.cloudinary.com/exertis-uk/c_crop,g_custom/h_100/banners/exertis_only_white_on_red_HR.png" height="30"  alt="me" style="position:relative; bottom:5px;"></a>
    </div>
    
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
          <li class="lead"><a href="#" id="nav-bar-url"></a></li>
          
      </ul>
      <ul class="nav navbar-nav navbar-right col-md-offset-3">
          
          <li class="lead" id="clock"> </li>
      </ul>
    </div>
    

    </div><!-- /.navbar-collapse -->
</nav>
</header>
    
    <div class="container topdownalittle">
  <!-- Carousel
    ================================================== -->
    <div id="myCarousel" class="carousel slide" data-ride="carousel" data-interval="30000">
      <!-- Indicators -->
      <ol class="carousel-indicators">
      </ol>
      <div class="carousel-inner" role="listbox">
      </div>
      
      
      
      
      <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
        <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
        <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
      </a>
    </div>
  
    </div> <!-- container -->
	  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
</body>
</html>
